(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";!function(){var e=void 0,t=function(e){var t=n(e);return t&&t.params?t.params.id:""},n=function(e){var t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search,params:function(){for(var e,n={},a=t.search.replace(/^\?/,"").split("&"),o=a.length,r=0;o>r;r++)a[r]&&(e=a[r].split("="),n[e[0]]=e[1]);return n}(),file:(t.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1"),relative:(t.href.match(/tp:\/\/[^\/]+(.+)/)||[,""])[1],segments:t.pathname.replace(/^\//,"").split("/")}},a=function(e){return $.simplyToast(e,"danger")},o=function(e){return $.simplyToast(e,"success")},r=n(window.location.url),c=!1,i=$("#tpls"),s=$("#sources"),l=$("#btn-regen"),u=$("#runner-output"),d=$("#generator-featured, #generator-list"),p=$("#generator"),f=$("#generator-name"),m=$("#generator-title"),h=$("#generator-desc"),v=void 0,g=new Generador({host:"//"+r.host+(r.port?":"+r.port:"")}),b=function(e){return e.match(/;@tpl\|/m)?e:";@tpl|main\n"+e},k=function(){var e=b(i.val());v=g.parseString(""+e+s.val()).then(function(){c=!0,w()})},w=function(){c&&u.empty().append(g.toHtml(g.generate()))},E=function(e){o("Guardado con exito"),console.log("RES",e),setTimeout(function(){window.location.href=e.link+"?edit=1"},500)},y=function(e){var t="NEW"===e?"":e,n=f.val().trim(),r=h.val().trim();if(!n||!r)return void a("Falta nombre o descripcion");var c={name:n,desc:r,data:{tpls:b(i.val()),tables:s.val()}};return t?g.remotes.update(t,c).then(function(e){o("Guardado con exito")})["catch"](function(e){a(e.message)}):void g.remotes.create(c).then(E)["catch"](function(e){a(e.message)})},C=function(e){var t=f.val().trim()+" - copia",n=h.val().trim();return t&&n?void g.remotes.create({name:t,desc:n,parent:e,data:{tpls:b(i.val()),tables:s.val()}}).then(E)["catch"](function(e){a(e.message)}):void a("Falta nombre o descripcion")},N=function(){$("#save").removeClass("disabled").off("click").on("click",function(){return y(e)}),"NEW"!==e&&$("#fork").removeClass("disabled").off("click").on("click",function(){return C(e)})},T=function(e){m.html($(e.target).val())},G=function(e){return p.removeClass("hide"),i.on("change",k),f.on("change",T),s.on("change",k),l.on("click",w),"NEW"===e?void k():void g.remotes.load(e).then(function(t){return t||Promise.reject("No hay datos para el identificador "+e)}).then(function(e){f.val(e.name),h.val(e.desc),i.val(b(e.data.tpls)),s.val(e.data.tables),k(),w()})["catch"](function(t){a("No hay datos para el identificador "+e)})};$(function(){if(e=GENERATOR_SOURCE_ID||t(window.location.href),!e)return void d.removeClass("hide");G(e);var n=new Clipboard("#btn-copy");n.on("success",function(e){o("Copiado al portapapeles"),e.clearSelection()}),g.getTokenFromAuth().then(function(e){N()})["catch"](function(e){})})}();

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJEOlxcd29ya3NwYWNlXFxjb21wYXJ0aWRvXFxIRVJPS1VcXHJvbGVhbmRvXFxzdGF0aWNcXGpzXFxnZW5lcmFkb3Jlcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLGNBQ0UsV0FFQSxHQUFJLEdBQUEsT0FDRSxFQUFtQixTQUFBLEdBQ3ZCLEdBQU0sR0FBTSxFQUFTLEVBQ3JCLE9BQVEsSUFBTyxFQUFJLE9BQVUsRUFBSSxPQUFPLEdBQUssSUFHekMsRUFBVyxTQUFBLEdBQ2YsR0FBSSxHQUFJLFNBQVMsY0FBYyxJQUUvQixPQURBLEdBQUUsS0FBTyxHQUVQLE9BQVEsRUFDUixTQUFVLEVBQUUsU0FBUyxRQUFRLElBQUssSUFDbEMsS0FBTSxFQUFFLFNBQ1IsS0FBTSxFQUFFLEtBQ1IsTUFBTyxFQUFFLE9BQ1QsT0FBUyxXQUlQLElBSEEsR0FFMkIsR0FGdkIsS0FDRixFQUFNLEVBQUUsT0FBTyxRQUFRLE1BQU0sSUFBSSxNQUFNLEtBQ3ZDLEVBQU0sRUFBSSxPQUFRLEVBQUksRUFDaEIsRUFBRixFQUFNLElBQ0wsRUFBSSxLQUNULEVBQUksRUFBSSxHQUFHLE1BQU0sS0FDakIsRUFBSSxFQUFFLElBQU0sRUFBRSxHQUVoQixPQUFPLE1BRVQsTUFBTyxFQUFFLFNBQVMsTUFBTSxvQkFBcUIsQ0FBRyxLQUFLLEdBQ3JELEtBQU0sRUFBRSxLQUFLLFFBQVEsSUFBSyxJQUMxQixLQUFNLEVBQUUsU0FBUyxRQUFRLFdBQVksT0FDckMsVUFBVyxFQUFFLEtBQUssTUFBTSx1QkFBd0IsQ0FBRyxLQUFLLEdBQ3hELFNBQVUsRUFBRSxTQUFTLFFBQVEsTUFBTyxJQUFJLE1BQU0sT0FJNUMsRUFBWSxTQUFBLEdBQUEsTUFBTyxHQUFFLFlBQVksRUFBSyxXQUN0QyxFQUFVLFNBQUEsR0FBQSxNQUFPLEdBQUUsWUFBWSxFQUFLLFlBRXBDLEVBQU8sRUFBUyxPQUFPLFNBQVMs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QUNSLEVBQUUsbUJBSUosRUFBSSxtQkFDRCxLQUFLLFNBQUEsR0FDSixNQUZKLFNBSVMsU0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCdcclxuOyhmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGxldCBTT1VSQ0VfSURcclxuICBjb25zdCBnZXRSZW1vdGVGcm9tVXJsID0gcmF3VXJsID0+IHtcclxuICAgIGNvbnN0IHVybCA9IHBhcnNlVVJMKHJhd1VybClcclxuICAgIHJldHVybiAodXJsICYmIHVybC5wYXJhbXMpID8gdXJsLnBhcmFtcy5pZCA6ICcnXHJcbiAgfVxyXG5cclxuICBjb25zdCBwYXJzZVVSTCA9IHVybCA9PiB7XHJcbiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxyXG4gICAgYS5ocmVmID0gdXJsXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzb3VyY2U6IHVybCxcclxuICAgICAgcHJvdG9jb2w6IGEucHJvdG9jb2wucmVwbGFjZSgnOicsICcnKSxcclxuICAgICAgaG9zdDogYS5ob3N0bmFtZSxcclxuICAgICAgcG9ydDogYS5wb3J0LFxyXG4gICAgICBxdWVyeTogYS5zZWFyY2gsXHJcbiAgICAgIHBhcmFtczogKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmV0ID0ge30sXHJcbiAgICAgICAgICBzZWcgPSBhLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywnJykuc3BsaXQoJyYnKSxcclxuICAgICAgICAgIGxlbiA9IHNlZy5sZW5ndGgsIGkgPSAwLCBzO1xyXG4gICAgICAgIGZvciAoO2k8bGVuO2krKykge1xyXG4gICAgICAgICAgaWYgKCFzZWdbaV0pIHsgY29udGludWU7IH1cclxuICAgICAgICAgIHMgPSBzZWdbaV0uc3BsaXQoJz0nKTtcclxuICAgICAgICAgIHJldFtzWzBdXSA9IHNbMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXRcclxuICAgICAgfSkoKSxcclxuICAgICAgZmlsZTogKGEucGF0aG5hbWUubWF0Y2goL1xcLyhbXlxcLz8jXSspJC9pKSB8fCBbLCAnJ10pWzFdLFxyXG4gICAgICBoYXNoOiBhLmhhc2gucmVwbGFjZSgnIycsICcnKSxcclxuICAgICAgcGF0aDogYS5wYXRobmFtZS5yZXBsYWNlKC9eKFteXFwvXSkvLCAnLyQxJyksXHJcbiAgICAgIHJlbGF0aXZlOiAoYS5ocmVmLm1hdGNoKC90cDpcXC9cXC9bXlxcL10rKC4rKS8pIHx8IFssICcnXSlbMV0sXHJcbiAgICAgIHNlZ21lbnRzOiBhLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykuc3BsaXQoJy8nKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2hvd0Vycm9yID0gZXJyID0+ICQuc2ltcGx5VG9hc3QoZXJyLCAnZGFuZ2VyJylcclxuICBjb25zdCBhbGVydE9rID0gbXNnID0+ICQuc2ltcGx5VG9hc3QobXNnLCAnc3VjY2VzcycpXHJcblxyXG4gIGNvbnN0IGJhc2UgPSBwYXJzZVVSTCh3aW5kb3cubG9jYXRpb24udXJsKVxyXG5cclxuICBsZXQgU1RBUlRFRCA9IGZhbHNlXHJcbiAgY29uc3QgJHRwbHMgPSAkKCcjdHBscycpXHJcbiAgY29uc3QgJHNvdXJjZXMgPSAkKCcjc291cmNlcycpXHJcbiAgY29uc3QgJGJ0blJlZ2VuID0gJCgnI2J0bi1yZWdlbicpXHJcbiAgY29uc3QgJG91dHB1dCA9ICQoJyNydW5uZXItb3V0cHV0JylcclxuICBjb25zdCAkZXhhbXBsZXMgPSAkKCcjZ2VuZXJhdG9yLWZlYXR1cmVkLCAjZ2VuZXJhdG9yLWxpc3QnKVxyXG4gIGNvbnN0ICRnZW5lcmF0b3IgPSAkKCcjZ2VuZXJhdG9yJylcclxuICBjb25zdCAkdGFibGVOYW1lID0gJCgnI2dlbmVyYXRvci1uYW1lJylcclxuICBjb25zdCAkdGFibGVUaXRsZSA9ICQoJyNnZW5lcmF0b3ItdGl0bGUnKVxyXG4gIGNvbnN0ICR0YWJsZURlc2MgPSAkKCcjZ2VuZXJhdG9yLWRlc2MnKVxyXG5cclxuICBsZXQgZ2VuZXJhZG9yXHJcblxyXG4gIGNvbnN0IGdlbiA9IG5ldyBHZW5lcmFkb3Ioe1xyXG4gICAgaG9zdDogYC8vJHtiYXNlLmhvc3R9JHtiYXNlLnBvcnQgPyAnOicrIGJhc2UucG9ydCA6ICcnfWBcclxuICB9KVxyXG5cclxuICBjb25zdCBnZXRUcGxzID0gc3JjID0+IHtcclxuICAgIGlmICghc3JjLm1hdGNoKC87QHRwbFxcfC9tKSkge1xyXG4gICAgICByZXR1cm4gYDtAdHBsfG1haW5cXG4ke3NyY31gXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3JjXHJcbiAgfVxyXG5cclxuICBjb25zdCByZXN0YXJ0R2VuZXJhdG9yID0gKCkgPT4ge1xyXG4gICAgY29uc3QgdHBscyA9IGdldFRwbHMoJHRwbHMudmFsKCkpXHJcbiAgICBnZW5lcmFkb3IgPSBnZW4ucGFyc2VTdHJpbmcoYCR7dHBsc30keyRzb3VyY2VzLnZhbCgpfWApLnRoZW4oKCkgPT4ge1xyXG4gICAgICBTVEFSVEVEID0gdHJ1ZVxyXG4gICAgICBydW5HZW5lcmF0b3IoKVxyXG4gICAgfSlcclxuICB9XHJcbiAgY29uc3QgcnVuR2VuZXJhdG9yID0gKCkgPT4ge1xyXG4gICAgaWYgKCFTVEFSVEVEKSByZXR1cm47XHJcblxyXG4gICAgJG91dHB1dC5lbXB0eSgpLmFwcGVuZChnZW4udG9IdG1sKGdlbi5nZW5lcmF0ZSgpKSlcclxuICB9XHJcblxyXG4gIGNvbnN0IHJlZGlyZWN0QWZ0ZXJOZXcgPSBnZW5lcmF0b3IgPT4ge1xyXG4gICAgYWxlcnRPaygnR3VhcmRhZG8gY29uIGV4aXRvJylcclxuICAgIGNvbnNvbGUubG9nKCdSRVMnLCBnZW5lcmF0b3IpXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgJHtnZW5lcmF0b3IubGlua30/ZWRpdD0xYFxyXG4gICAgfSwgNTAwKVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2F2ZUNvbnRlbnQgPSBzb3VyY2VJZCA9PiB7XHJcbiAgICBjb25zdCBpZCA9IHNvdXJjZUlkID09PSAnTkVXJyA/ICcnIDogc291cmNlSWRcclxuICAgIGNvbnN0IG5hbWUgPSAkdGFibGVOYW1lLnZhbCgpLnRyaW0oKVxyXG4gICAgY29uc3QgZGVzYyA9ICR0YWJsZURlc2MudmFsKCkudHJpbSgpXHJcbiAgICBpZiAoIW5hbWUgfHwgIWRlc2MpIHtcclxuICAgICAgc2hvd0Vycm9yKCdGYWx0YSBub21icmUgbyBkZXNjcmlwY2lvbicpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGVudCA9IHtcclxuICAgICAgbmFtZSwgZGVzYyxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHRwbHM6IGdldFRwbHMoJHRwbHMudmFsKCkpLFxyXG4gICAgICAgIHRhYmxlczogJHNvdXJjZXMudmFsKClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChpZCkge1xyXG4gICAgICByZXR1cm4gZ2VuLnJlbW90ZXMudXBkYXRlKGlkLCBjb250ZW50KS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgYWxlcnRPaygnR3VhcmRhZG8gY29uIGV4aXRvJylcclxuICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgIHNob3dFcnJvcihlcnIubWVzc2FnZSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGdlbi5yZW1vdGVzLmNyZWF0ZShjb250ZW50KVxyXG4gICAgICAudGhlbihyZWRpcmVjdEFmdGVyTmV3KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBzaG93RXJyb3IoZXJyLm1lc3NhZ2UpXHJcbiAgICAgIH0pXHJcbiAgfVxyXG5cclxuICBjb25zdCBmb3JrQ29udGVudCA9IHNvdXJjZUlkID0+IHtcclxuICAgIGNvbnN0IG5hbWUgPSBgJHskdGFibGVOYW1lLnZhbCgpLnRyaW0oKX0gLSBjb3BpYWBcclxuICAgIGNvbnN0IGRlc2MgPSAkdGFibGVEZXNjLnZhbCgpLnRyaW0oKVxyXG4gICAgaWYgKCFuYW1lIHx8ICFkZXNjKSB7XHJcbiAgICAgIHNob3dFcnJvcignRmFsdGEgbm9tYnJlIG8gZGVzY3JpcGNpb24nKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBnZW4ucmVtb3Rlcy5jcmVhdGUoe1xyXG4gICAgICBuYW1lLCBkZXNjLFxyXG4gICAgICBwYXJlbnQ6IHNvdXJjZUlkLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgdHBsczogZ2V0VHBscygkdHBscy52YWwoKSksXHJcbiAgICAgICAgdGFibGVzOiAkc291cmNlcy52YWwoKVxyXG4gICAgICB9XHJcbiAgICB9KS50aGVuKHJlZGlyZWN0QWZ0ZXJOZXcpXHJcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIHNob3dFcnJvcihlcnIubWVzc2FnZSlcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIGNvbnN0IGVuYWJsZUxvZ2dlZFVJID0gKCkgPT4ge1xyXG4gICAgJCgnI3NhdmUnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgKCkgPT4gc2F2ZUNvbnRlbnQoU09VUkNFX0lEKSlcclxuXHJcbiAgICBpZiAoU09VUkNFX0lEID09PSAnTkVXJykgcmV0dXJuXHJcblxyXG4gICAgJCgnI2ZvcmsnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgKCkgPT4gZm9ya0NvbnRlbnQoU09VUkNFX0lEKSlcclxuICB9XHJcbiAgXHJcbiAgY29uc3QgdXBkYXRlVGl0bGUgPSBlID0+IHtcclxuICAgICR0YWJsZVRpdGxlLmh0bWwoJChlLnRhcmdldCkudmFsKCkpXHJcbiAgfVxyXG5cclxuICBjb25zdCBzaG93R2VuZXJhdG9yID0gc291cmNlSWQgPT4ge1xyXG5cclxuICAgICRnZW5lcmF0b3IucmVtb3ZlQ2xhc3MoJ2hpZGUnKVxyXG5cclxuICAgICR0cGxzLm9uKCdjaGFuZ2UnLCByZXN0YXJ0R2VuZXJhdG9yKVxyXG4gICAgJHRhYmxlTmFtZS5vbignY2hhbmdlJywgdXBkYXRlVGl0bGUpXHJcbiAgICAkc291cmNlcy5vbignY2hhbmdlJywgcmVzdGFydEdlbmVyYXRvcilcclxuICAgICRidG5SZWdlbi5vbignY2xpY2snLCBydW5HZW5lcmF0b3IpXHJcblxyXG4gICAgaWYgKHNvdXJjZUlkID09PSAnTkVXJykge1xyXG4gICAgICByZXN0YXJ0R2VuZXJhdG9yKClcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgZ2VuLnJlbW90ZXMubG9hZChzb3VyY2VJZCkudGhlbihyZXMgPT4ge1xyXG4gICAgICByZXR1cm4gcmVzIHx8IFByb21pc2UucmVqZWN0KGBObyBoYXkgZGF0b3MgcGFyYSBlbCBpZGVudGlmaWNhZG9yICR7c291cmNlSWR9YClcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgJHRhYmxlTmFtZS52YWwocmVzLm5hbWUpXHJcbiAgICAgICAgJHRhYmxlRGVzYy52YWwocmVzLmRlc2MpXHJcbiAgICAgICAgJHRwbHMudmFsKGdldFRwbHMocmVzLmRhdGEudHBscykpXHJcbiAgICAgICAgJHNvdXJjZXMudmFsKHJlcy5kYXRhLnRhYmxlcylcclxuICAgICAgICByZXN0YXJ0R2VuZXJhdG9yKClcclxuICAgICAgICBydW5HZW5lcmF0b3IoKVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBzaG93RXJyb3IoYE5vIGhheSBkYXRvcyBwYXJhIGVsIGlkZW50aWZpY2Fkb3IgJHtzb3VyY2VJZH1gKVxyXG4gICAgICB9KVxyXG5cclxuICB9XHJcblxyXG4gICQoKCkgPT4ge1xyXG5cclxuXHJcbiAgICBTT1VSQ0VfSUQgPSBHRU5FUkFUT1JfU09VUkNFX0lEIHx8IGdldFJlbW90ZUZyb21Vcmwod2luZG93LmxvY2F0aW9uLmhyZWYpXHJcblxyXG4gICAgaWYgKCFTT1VSQ0VfSUQpIHtcclxuICAgICAgJGV4YW1wbGVzLnJlbW92ZUNsYXNzKCdoaWRlJylcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0dlbmVyYXRvcihTT1VSQ0VfSUQpXHJcblxyXG4gICAgY29uc3QgY2xpcGJvYXJkID0gbmV3IENsaXBib2FyZCgnI2J0bi1jb3B5Jyk7XHJcbiAgICBjbGlwYm9hcmQub24oJ3N1Y2Nlc3MnLCBlID0+IHtcclxuICAgICAgYWxlcnRPaygnQ29waWFkbyBhbCBwb3J0YXBhcGVsZXMnKVxyXG4gICAgICBlLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgZ2VuLmdldFRva2VuRnJvbUF1dGgoKVxyXG4gICAgICAudGhlbih0b2tlbiA9PiB7XHJcbiAgICAgICAgZW5hYmxlTG9nZ2VkVUkoKVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHt9KVxyXG4gIH0pXHJcblxyXG59KCkpXHJcbiJdfQ==
